---
title: 也谈最近PHP的漏洞 CVE-2015-4024
date: 2015-05-23 18:58:34
tags:
  # - php
  # - bug
---

5.20 本是一个对于我来说十分宁静的日子，然而就当我在 V2EX 瞎逛的时候，发现了一个令我<del>高潮</del>的贴子 [宇宙最强语言 PHP 爆出 DoS 漏洞,可以直接灌满 CPU](https://www.v2ex.com/t/192338)，我 X！这是什么鬼！<!--more-->

![图1](//ww4.sinaimg.cn/large/d3e2cab5gw1esefd6mxd7j20bc09nt9g.jpg)

进去一看，原来是 PHP 最新的 DoS 漏洞，想了解详情移步：[https://bugs.php.net/bug.php?id=69364](https://bugs.php.net/bug.php?id=69364)，本文不再说明漏洞产生原因。

## 利用

本来想等回家了再写个利用脚本，没想到 typcn 当天就写出来了。那么，我们就使用他的代码吧。据说，利用这个 BUG 10M 带宽就可以崩掉集群。

[GitHub](https://github.com/typcn/php-load-test) | [PHP 压力测试脚本 - 10M 带宽秒杀集群](http://blog.eqoe.cn/posts/php-load-test.html)

### 适用 PHP 版本：

- PHP 5.6.9 以下版本
- PHP 5.5.25 以下版本
- PHP 5.4.41 以下版本
- PHP 5.3 及所有以前的版本

### 使用方法

```python
python xxx.py -t "地址" -x "线程数" -r "350000"
```

PS: 用自家网络攻击可能效果不明显，我家上行 2M 打了 sae 半天都没反应。。线程一般 50 - 100 就行，太高电脑直接卡了。

## 修复

1. 升级 PHP 版本，具体请看[PHP 官网](https://php.net/)。
2. 如果你使用虚拟主机，可以提醒主机商升级。

## 拓展

[PHP multipart/form-data 远程 DOS 漏洞](http://drops.wooyun.org/papers/6077)

## 扯淡（以下内容与本文无关）

最近我又开始想换博客程序了，挺看好 Ghost 的，但虚拟主机支持 Node.js 好像很少吧？就国内那几个 PaaS 平台。然后，我又想把网站备案了，迁入国内服务器，真是太纠结了。。。
